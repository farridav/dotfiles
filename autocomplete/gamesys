GAMESYS_REPOS='/Users/david.farrington/workspace/gamesys'


cdg () {
    if [[ -z "$1" ]]
    then
        cd $GAMESYS_REPOS/ && ls -1
    else
        if [ -d $GAMESYS_REPOS/$1 ];
        then
           cd $GAMESYS_REPOS/$1
           if [ -f .venv/bin/activate ]; then
	           . .venv/bin/activate
           elif [ -f env/bin/activate ]; then
	           . env/bin/activate
           fi
        fi
    fi

}

_cdg() {
    COMPREPLY=()
    local cur projects
    projects=$(ls $GAMESYS_REPOS)
    _get_comp_words_by_ref cur
    COMPREPLY=( $(compgen -W "${projects}" -- ${cur}) )
}

complete -F _cdg cdg
